import { Module } from "../core";

import { Message, Client } from 'discord.js';

export class CommandsManager {
    constructor(public module: Module) { }

    HandleComamnds(msg: Message) {
        if (msg.author.id === this.module.getClient().user.id) return;

        let args: string[] = msg.content.split(" ");

        if (args[0].indexOf(this.module.moduleOptions.config.prefix) < 0) return;

        this.module.moduleOptions.commands.forEach((cmd) => {
            if (args[0].substring(this.module.moduleOptions.config.prefix.length) === cmd.name) {
                new cmd.class(this.module.getClient(), msg).run();
                
                return;
            }
        });
    }
}
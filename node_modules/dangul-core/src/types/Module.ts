import { CommandsManager } from '../core';

import { Client } from 'discord.js';

import { ModuleOptions } from "./ModuleOptions";

export class Module {
    private Client: Client;
    CommandManager: CommandsManager;

    constructor(public moduleOptions?: ModuleOptions) { }

    getClient(): Client {
        return this.Client;
    }

    initBot(): Client {
        let nClient: Client = new Client();

        nClient.login(this.moduleOptions.config.token);

        this.Client = nClient;

        this.CommandManager = new CommandsManager(this);

        return nClient;
    }

    onReady(cb: Function) {
        this.Client.on('ready', cb);
    }

    onMessage(cb: Function) {
        this.Client.on('message', cb);
    }

    on(event: string, cb: Function) {
        this.Client.on(event, cb);
    }
}